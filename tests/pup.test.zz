const path = require("path");
const ava = require("ava");
const puppeteer = require("puppeteer");

let browser;
let page;

ava.before("start up headless chrome", async (t) => {
  const extensionPath = path.resolve(__dirname, "../src");

  browser = await puppeteer.launch({
    headless: false,
    args: [
      `--disable-extensions-except=${extensionPath}`,
      `--load-extension=${extensionPath}`,
    ],
  });
  page = await browser.newPage();
});

ava.serial("simpleton", (t) => {
  t.pass();
});

ava.after.always("close headless chrome", async (t) => {
  await browser.close();
});
